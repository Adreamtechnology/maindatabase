/* 深色模式样式 */
:root {
  /* 浅色模式变量 - 与原始样式保持一致 */
  --primary-color: #F8BBD0; /* 淡粉色主题色 */
  --primary-color-rgb: 248, 187, 208; /* 淡粉色RGB值 */
  --primary-dark: #F48FB1;
  --primary-light: #FCE4EC;
  --primary-text: #212121;
  --secondary-text: #757575;
  --divider-color: #EEEEEE;
  --accent-color: #FF4081;
  --background-color: #FFFFFF;
  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  --transition-speed: 0.3s;
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(255, 255, 255, 0.5);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

/* 深色模式变量 */
.dark-mode {
  --primary-color: #AD1457; /* 深粉色主题色 */
  --primary-color-rgb: 173, 20, 87; /* 深粉色RGB值 */
  --primary-dark: #880E4F;
  --primary-light: #D81B60;
  --primary-text: #E0E0E0;
  --secondary-text: #BDBDBD;
  --divider-color: #424242;
  --accent-color: #FF4081;
  --background-color: #121212;
  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  --glass-bg: rgba(18, 18, 18, 0.7);
  --glass-border: rgba(66, 66, 66, 0.5);
  --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

/* 深色模式下的主体样式 */
.dark-mode body, .dark-mode html {
  color: var(--primary-text);
  background-color: var(--background-color);
}

/* 深色模式下的侧边栏样式 */
.dark-mode .sidebar {
  background: var(--glass-bg);
  border-color: var(--glass-border);
}

.dark-mode .sidebar-nav {
  background-color: rgba(33, 33, 33, 0.5);
  border-right: 1px solid var(--divider-color);
}

.dark-mode .sidebar-nav .nav-item {
  color: var(--secondary-text);
}

.dark-mode .sidebar-nav .nav-item.active {
  background-color: rgba(var(--primary-color-rgb), 0.2);
  color: var(--primary-color);
}

.dark-mode .sidebar-title {
  color: var(--primary-text);
}

/* 深色模式下的搜索框样式 */
.dark-mode .search-input-wrapper {
  background-color: rgba(33, 33, 33, 0.7);
  border: 1px solid var(--divider-color);
}

.dark-mode .search-input {
  color: var(--primary-text);
  background-color: transparent;
}

.dark-mode .search-input::placeholder {
  color: var(--secondary-text);
}

.dark-mode .search-button {
  background-color: var(--primary-color);
}

/* 深色模式下的列表样式 */
.dark-mode .list-group-item {
  background-color: rgba(33, 33, 33, 0.7);
  border-color: var(--divider-color);
  color: var(--primary-text);
}

.dark-mode .list-group-item:hover {
  background-color: rgba(66, 66, 66, 0.7);
}

.dark-mode .anime-item .anime-title {
  color: var(--primary-text);
}

.dark-mode .anime-item .anime-count {
  color: var(--secondary-text);
}

/* 深色模式下的信息卡片样式 */
.dark-mode .info-card {
  background: var(--glass-bg);
  border-color: var(--glass-border);
}

.dark-mode .card-title, .dark-mode .card-text {
  color: var(--primary-text);
}

.dark-mode .btn-close {
  filter: invert(1);
}

/* 深色模式下的按钮样式 */
.dark-mode .btn-primary {
  background-color: var(--primary-color);
  border-color: var(--primary-color);
  color: #FFFFFF;
}

.dark-mode .btn-primary:hover {
  background-color: var(--primary-dark);
  border-color: var(--primary-dark);
}

.dark-mode .btn-outline-primary {
  color: var(--primary-color);
  border-color: var(--primary-color);
}

.dark-mode .btn-outline-primary:hover {
  background-color: rgba(var(--primary-color-rgb), 0.2);
  color: var(--primary-color);
}

.dark-mode .btn-outline-secondary {
  color: var(--secondary-text);
  border-color: var(--divider-color);
}

/* 深色模式下的表单元素样式 */
.dark-mode .form-control, .dark-mode .form-select {
  background-color: rgba(33, 33, 33, 0.7);
  border-color: var(--divider-color);
  color: var(--primary-text);
}

.dark-mode .form-control:focus, .dark-mode .form-select:focus {
  border-color: var(--primary-color);
  box-shadow: 0 0 0 0.2rem rgba(var(--primary-color-rgb), 0.25);
}

.dark-mode .form-text {
  color: var(--secondary-text);
}

/* 深色模式下的设置面板样式 */
.dark-mode #settings-panel .nav-tabs {
  border-bottom-color: var(--divider-color);
}

.dark-mode #settings-panel .nav-tabs .nav-link {
  color: var(--secondary-text);
}

.dark-mode #settings-panel .nav-tabs .nav-link.active {
  color: var(--primary-color);
}

.dark-mode .settings-section {
  background-color: rgba(33, 33, 33, 0.5);
}

.dark-mode .settings-section-title {
  color: var(--primary-text);
  border-bottom-color: var(--divider-color);
}

/* 深色模式下的移动端抽屉样式 */
.dark-mode .mobile-drawer {
  background: var(--glass-bg);
  border-top: 1px solid var(--glass-border);
}

.dark-mode .drawer-handle {
  background-color: var(--divider-color);
}

.dark-mode .mobile-drawer-content {
  background-color: transparent;
}

.dark-mode .mobile-drawer-handle {
  background-color: var(--divider-color);
}

.dark-mode .mobile-drawer-search {
  background: var(--glass-bg);
}

.dark-mode .mobile-drawer-search .glass-input {
  background-color: rgba(33, 33, 33, 0.7);
  color: var(--primary-text);
  border-color: var(--divider-color);
}

.dark-mode .mobile-drawer .anime-cover-header {
  background: rgba(33, 33, 33, 0.7);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.dark-mode .mobile-drawer .anime-cover-name {
  color: var(--primary-text);
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.dark-mode .mobile-drawer .anime-cover-count {
  color: var(--primary-color);
}

/* 深色模式下的移动端导航栏样式 */
.dark-mode .mobile-nav {
  background: var(--glass-bg);
  border-top: 1px solid var(--glass-border);
}

.dark-mode .mobile-nav-item {
  color: var(--secondary-text);
}

.dark-mode .mobile-nav-item.active {
  color: var(--primary-color);
}

.dark-mode .mobile-nav-item span {
  color: var(--secondary-text);
}

.dark-mode .mobile-nav-item.active span {
  color: var(--primary-color);
}

/* 深色模式下的模式切换按钮样式 */
.dark-mode .mobile-mode-controls {
  background-color: rgba(33, 33, 33, 0.9);
}

/* 深色模式下的标记点样式 */
.dark-mode .custom-marker {
  border-color: var(--divider-color);
}

.dark-mode .anime-marker {
  border-color: var(--divider-color);
}

.dark-mode .guide-marker {
  border-color: var(--divider-color);
}

/* 深色模式下的聚合标记样式 */
.dark-mode .marker-cluster-small,
.dark-mode .marker-cluster-medium,
.dark-mode .marker-cluster-large {
  background-color: rgba(var(--primary-color-rgb), 0.7);
  box-shadow: 0 0 0 4px rgba(var(--primary-color-rgb), 0.3);
}

.dark-mode .marker-cluster-small div,
.dark-mode .marker-cluster-medium div,
.dark-mode .marker-cluster-large div {
  background-color: rgba(var(--primary-color-rgb), 0.9);
  color: #FFFFFF;
}

/* 深色模式下的附近巡礼点封面样式 */
.dark-mode .nearby-cover-item {
  border-color: var(--divider-color);
}

.dark-mode .nearby-cover-badge {
  background-color: var(--primary-color);
}

/* 深色模式下的滑动操作菜单样式 */
.dark-mode .swipe-hint {
  background-color: rgba(33, 33, 33, 0.7);
  color: var(--secondary-text);
}

/* 深色模式下的加载提示样式 */
.dark-mode .loading-tip {
  background-color: rgba(33, 33, 33, 0.9);
  color: var(--primary-text);
}

/* 深色模式下的动漫封面渐变效果 */
.dark-mode .anime-cover-gradient {
  background: linear-gradient(to bottom, rgba(18, 18, 18, 0), rgba(18, 18, 18, 1));
}

/* 深色模式下的动漫封面背景渐变效果 */
.dark-mode .anime-cover-bg::after {
  background: linear-gradient(to bottom,
              rgba(var(--theme-color-rgb), 0.4),
              rgba(18, 18, 18, 0));
}

/* 深色模式下的地图控件样式 */
.dark-mode .leaflet-control-zoom a,
.dark-mode .leaflet-control-layers a {
  background-color: rgba(33, 33, 33, 0.9) !important;
  color: var(--primary-text) !important;
  border-color: var(--divider-color) !important;
}

.dark-mode .leaflet-control-zoom a:hover,
.dark-mode .leaflet-control-layers a:hover {
  background-color: rgba(66, 66, 66, 0.9) !important;
}

/* 深色模式下的巡礼点列表项样式 */
.dark-mode .point-item {
  background-color: rgba(33, 33, 33, 0.7);
  border-color: var(--divider-color);
}

.dark-mode .point-item:hover {
  background-color: rgba(66, 66, 66, 0.7);
}

.dark-mode .point-item .point-title {
  color: var(--primary-text);
}

.dark-mode .point-item .point-subtitle {
  color: var(--secondary-text);
}

/* 深色模式下的移动端抽屉中的列表项样式 */
.dark-mode #mobile-anime-list .anime-item,
.dark-mode #mobile-anime-list .point-item,
.dark-mode #mobile-anime-list .location-item {
  background-color: rgba(33, 33, 33, 0.7);
  border-color: var(--divider-color);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
}

.dark-mode #mobile-anime-list .anime-item:hover,
.dark-mode #mobile-anime-list .anime-item:active,
.dark-mode #mobile-anime-list .point-item:hover,
.dark-mode #mobile-anime-list .point-item:active,
.dark-mode #mobile-anime-list .location-item:hover,
.dark-mode #mobile-anime-list .location-item:active {
  background-color: rgba(66, 66, 66, 0.8);
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.dark-mode #mobile-anime-list .anime-name,
.dark-mode #mobile-anime-list .point-name,
.dark-mode #mobile-anime-list .location-name {
  color: var(--primary-text);
}

.dark-mode #mobile-anime-list .anime-points,
.dark-mode #mobile-anime-list .anime-title,
.dark-mode #mobile-anime-list .point-episode,
.dark-mode #mobile-anime-list .location-address {
  color: var(--secondary-text);
}

.dark-mode #mobile-anime-list .back-button {
  background: rgba(33, 33, 33, 0.7);
  color: var(--primary-color);
}

.dark-mode #mobile-anime-list .back-button:hover,
.dark-mode #mobile-anime-list .back-button:active {
  color: var(--accent-color);
}

.dark-mode #mobile-anime-list .anime-title-header {
  color: var(--primary-text);
  border-bottom-color: var(--divider-color);
}

.dark-mode #mobile-anime-list .points-list {
  background: rgba(33, 33, 33, 0.7);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.dark-mode #mobile-anime-list .no-results,
.dark-mode #mobile-anime-list .loading-indicator {
  background: rgba(33, 33, 33, 0.7);
  color: var(--secondary-text);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.dark-mode #mobile-anime-list .search-category {
  color: var(--secondary-text);
  border-bottom-color: var(--divider-color);
}

.dark-mode .expand-anime-btn {
  background-color: rgba(33, 33, 33, 0.8);
  border-color: var(--primary-color);
  color: var(--primary-color);
}

.dark-mode .expand-anime-btn:hover,
.dark-mode .expand-anime-btn:active {
  background-color: var(--primary-color);
  color: #FFFFFF;
}

/* 深色模式下的指南列表样式 */
.dark-mode .guide-item {
  background-color: rgba(33, 33, 33, 0.7);
  border-color: var(--divider-color);
}

.dark-mode .guide-item:hover {
  background-color: rgba(66, 66, 66, 0.7);
}

.dark-mode .guide-item .guide-title {
  color: var(--primary-text);
}

.dark-mode .guide-item .guide-subtitle {
  color: var(--secondary-text);
}

/* 深色模式下的弹窗样式 */
.dark-mode .modal-content {
  background-color: var(--background-color);
  border-color: var(--divider-color);
}

.dark-mode .modal-header {
  border-bottom-color: var(--divider-color);
}

.dark-mode .modal-footer {
  border-top-color: var(--divider-color);
}

.dark-mode .modal-title {
  color: var(--primary-text);
}

/* 深色模式下的地图图层控制样式 */
.dark-mode .leaflet-control-layers-expanded {
  background-color: rgba(33, 33, 33, 0.9) !important;
  color: var(--primary-text) !important;
  border-color: var(--divider-color) !important;
}

/* 深色模式下的地图归属信息样式 */
.dark-mode .leaflet-control-attribution {
  background-color: rgba(33, 33, 33, 0.7) !important;
  color: var(--secondary-text) !important;
}

.dark-mode .leaflet-control-attribution a {
  color: var(--primary-color) !important;
}
